# Telegram Chat Pain Finder (Updated)

Инструмент для поиска заказчиков (leads) в чатах Telegram.
Специально настроен под услуги: Боты, Интеграции (n8n), Автопостинг, Парсинг.

## 1. Как получить данные (Export Telegram JSON)

1. Открой **Telegram Desktop** (на компьютере).
2. Выбери нужный чат с вакансиями/фрилансом.
3. Нажми три точки (справа сверху) -> **Export chat history** (Экспорт истории чата).
4. Убедись, что выбрано:
   - Отключи Photos, Videos, Voice messages (чтобы быстрее).
   - Format: **JSON** (ОБЯЗАТЕЛЬНО!).
   - Path (Путь): выбери папку, например `C:\Projects\TelegramExports\ChatName`.
5. Нажми **Export**.
6. Появится файл `result.json`.

Можно экспортировать сразу несколько чатов в одну большую папку (каждый чат в своей подпапке).

## 2. Как запустить анализ

Открой терминал (cmd/powershell) и перейди в папку проекта.

```bash
# Пример простой
python analyze_chats.py --input "C:\Projects\TelegramExports" --out "out_reports"
```

### Полезные параметры
- `--since-days 30`: смотреть только за последние 30 дней (по умолчанию 60).
- `--top-k 50`: вывести топ-50 болей (по умолчанию 20).
- `--min-fit-score 0.4`: минимальная подходящесть под мои услуги (чем выше, тем меньше мусора, но можно упустить варианты).
- `--min-money-score 0.2`: минимальный сигнал денег (цены/срочность).
- `--leads-include-vacancies true`: добавить в список лидов (leads.md) качественные вакансии (по умолчанию выключено, только заказы).
- `--include-vacancies false`: отключить анализ вакансий (чтобы работало быстрее), но лучше оставить `true`, они теперь отделены от заказов.
- `--only-client-tasks true`: если хочешь в отчете видеть ТОЛЬКО заказы (без фона вакансий).

Пример для "горячего" поиска (последние 7 дней, только крутые заявки):
```bash
python analyze_chats.py --input "..." --out "out_hot" --since-days 7 --min-fit-score 0.5
```

## 3. Где смотреть результаты (Папка out)

После запуска появятся файлы в указанной папке (`--out`):

1. **`leads.md`** (САМОЕ ВАЖНОЕ)
   Список "Кому писать".
   Формат: Чат | Дата | Сниппет сообщения | Что предложить | Цена.
   Твоя задача: открыть файл, выбрать 20 человек и написать им по шаблону.

2. **`summary.md`**
   Общая сводка: Топ заказов (CLIENT_TASK), Топ вакансий (как фон), Топ идей заработка.

3. **`offers.md`**
   Готовые офферы под твои услуги (Боты, n8n, Парсинг). Используй их как основу для КП.

4. **`sales_messages.md`**
   Шаблоны сообщений:
   - First touch (первое сообщение в личку).
   - Ответ в общий чат.
   - Follow-up (напоминание).
   - Обработка "дорого/нет бюджета".

5. **`action_plan_14_days.md`**
   Твой план действий, чтобы заработать 30-35к за 2 недели.

6. **`pains.csv`**
   Таблица для детального анализа в Excel (если нужно).

## 4. Как это работает (Классификация)

Инструмент делит сообщения на:
- **CLIENT_TASK**: "Нужно сделать", "Ищу исполнителя", "Бюджет X". -> **Попадают в leads.md**.
- **VACANCY_HIRE**: "Ищу таргетолога в штат", "ЗП", "График". -> **Отдельный список (фон)**.
- **SERVICE_OFFER**: "Я настраиваю ботов", "Мое портфолио". -> Игнорируются.
- **SPAM_SCAM**: "Заработок на телефоне". -> Игнорируются.

Если видишь, что Вакансия попала в Заказы:
- Скорее всего, она содержит "технические" слова (настроить, бот) и не содержит явных стоп-слов вакансии (оклад, график).
- Мы усилили фильтры, чтобы "Ищу таргетолога" не попадало в "Мои заказы".
